<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-projects docs-version-current docs-doc-page docs-doc-id-clean-mail-automation" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Clean Mail Automation | Nebula: A family of PowerShell modules that go beyond your workstation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://gioxx.github.io/Nebula.KB-dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://gioxx.github.io/Nebula.KB-dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://gioxx.github.io/Nebula.KB-dev/Projects/clean-mail-automation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-projects-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-projects-current"><meta data-rh="true" property="og:title" content="Clean Mail Automation | Nebula: A family of PowerShell modules that go beyond your workstation"><meta data-rh="true" name="description" content="Dockerized IMAP mailbox cleanup with configurable retention, weekly scheduling, and optional Telegram notifications."><meta data-rh="true" property="og:description" content="Dockerized IMAP mailbox cleanup with configurable retention, weekly scheduling, and optional Telegram notifications."><link data-rh="true" rel="icon" href="/Nebula.KB-dev/img/Nebula_Icon_Header.svg"><link data-rh="true" rel="canonical" href="https://gioxx.github.io/Nebula.KB-dev/Projects/clean-mail-automation"><link data-rh="true" rel="alternate" href="https://gioxx.github.io/Nebula.KB-dev/Projects/clean-mail-automation" hreflang="en"><link data-rh="true" rel="alternate" href="https://gioxx.github.io/Nebula.KB-dev/Projects/clean-mail-automation" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Clean Mail Automation","item":"https://gioxx.github.io/Nebula.KB-dev/Projects/clean-mail-automation"}]}</script><link rel="alternate" type="application/rss+xml" href="/Nebula.KB-dev/blog/rss.xml" title="Nebula: A family of PowerShell modules that go beyond your workstation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Nebula.KB-dev/blog/atom.xml" title="Nebula: A family of PowerShell modules that go beyond your workstation Atom Feed"><link rel="stylesheet" href="/Nebula.KB-dev/assets/css/styles.d06eeff6.css">
<script src="/Nebula.KB-dev/assets/js/runtime~main.bc4d2d26.js" defer="defer"></script>
<script src="/Nebula.KB-dev/assets/js/main.8d8400a2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Nebula.KB-dev/img/Nebula_Icon_Header.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Nebula.KB-dev/"><div class="navbar__logo"><img src="/Nebula.KB-dev/img/Nebula_Icon_Header.svg" alt="Nebula KB Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Nebula.KB-dev/img/Nebula_Icon_Header.svg" alt="Nebula KB Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Nebula</b></a><a class="navbar__item navbar__link" href="/Nebula.KB-dev/Nebula/Automations/intro">Automations</a><a class="navbar__item navbar__link" href="/Nebula.KB-dev/Nebula/Core/intro">Core</a><a class="navbar__item navbar__link" href="/Nebula.KB-dev/Nebula/Log/intro">Log</a><a class="navbar__item navbar__link" href="/Nebula.KB-dev/Nebula/Tools/intro">Tools</a><div class="navbar__item"><span class="navbar-separator"></span></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Projects</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Nebula.KB-dev/Projects/intro">Overview</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/Nebula.KB-dev/Projects/clean-mail-automation">Clean Mail Automation</a></li><li><a class="dropdown__link" href="/Nebula.KB-dev/Projects/M365/intunewinapputilgui">IntuneWinAppUtil GUI</a></li><li><a class="dropdown__link" href="/Nebula.KB-dev/Projects/M365/m365-tenant-checker">Microsoft 365 Tenant Checker</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Utilities</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Nebula.KB-dev/message-header-analyzer">E-mail Header Analyzer</a></li><li><a class="dropdown__link" href="/Nebula.KB-dev/psadt-log-viewer">PSADT Log Viewer</a></li><li><a class="dropdown__link" href="/Nebula.KB-dev/quarantine-email-analyzer">Quarantine E-mail Analyzer</a></li></ul></div><div class="navbar__item"><span class="navbar-separator"></span></div><a class="navbar__item navbar__link" href="/Nebula.KB-dev/Nebula/intro">About</a><a href="https://gioxx.org" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/gioxx?tab=repositories&amp;q=Nebula" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Nebula.KB-dev/Projects/intro"><span title="Projects: introduction" class="linkLabel_WmDU">Projects: introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/Nebula.KB-dev/Projects/clean-mail-automation"><span title="Clean Mail Automation" class="linkLabel_WmDU">Clean Mail Automation</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/Nebula.KB-dev/Projects/M365/intunewinapputilgui"><span title="Microsoft 365" class="categoryLinkLabel_W154">Microsoft 365</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Nebula.KB-dev/Projects/M365/intunewinapputilgui"><span title="IntuneWinAppUtil GUI" class="linkLabel_WmDU">IntuneWinAppUtil GUI</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Nebula.KB-dev/Projects/M365/m365-tenant-checker"><span title="Microsoft 365 Tenant Checker" class="linkLabel_WmDU">Microsoft 365 Tenant Checker</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Nebula.KB-dev/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Clean Mail Automation</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Clean Mail Automation</h1></header>
<p><code>clean-mail-automation</code> is a Docker-first utility that connects to an IMAP mailbox and deletes emails older than a configurable retention period (default: 10 days).<br>
<!-- -->It executes immediately at container startup and then runs on a weekly cron schedule.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="demo-and-repository">Demo and repository<a href="#demo-and-repository" class="hash-link" aria-label="Direct link to Demo and repository" title="Direct link to Demo and repository" translate="no">‚Äã</a></h2>
<ul>
<li class="">Source code: <a href="https://github.com/gioxx/clean-mail-automation" target="_blank" rel="noopener noreferrer" class="">github.com/gioxx/clean-mail-automation</a></li>
<li class="">Docker Hub image: <code>gfsolone/clean-mail-automation</code></li>
<li class="">GHCR image: <code>ghcr.io/gioxx/clean-mail-automation</code></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-features">Key features<a href="#key-features" class="hash-link" aria-label="Direct link to Key features" title="Direct link to Key features" translate="no">‚Äã</a></h2>
<ul>
<li class="">IMAP over SSL connection with environment-based configuration.</li>
<li class="">Retention policy by days (<code>CLEAN_DAYS</code>) with per-run CLI override (<code>--days</code>).</li>
<li class="">Optional Telegram summary notifications (success/failure, deleted count, duration).</li>
<li class="">Weekly scheduling through container cron (<code>SCHEDULE_DAY</code>, <code>SCHEDULE_HOUR</code>, <code>SCHEDULE_MIN</code>).</li>
<li class="">Logs routed to container stdout/stderr.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="architecture-at-a-glance">Architecture at a glance<a href="#architecture-at-a-glance" class="hash-link" aria-label="Direct link to Architecture at a glance" title="Direct link to Architecture at a glance" translate="no">‚Äã</a></h2>
<ul>
<li class=""><strong>Script</strong> (<code>clean_email.py</code>): handles IMAP connection, filtering by age, deletion, and optional Telegram notification.</li>
<li class=""><strong>Entrypoint</strong> (<code>entrypoint.sh</code>): writes cron schedule and runs first cleanup at startup.</li>
<li class=""><strong>Container</strong> (<code>Dockerfile</code>): Python image running the script on schedule.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="environment-variables">Environment variables<a href="#environment-variables" class="hash-link" aria-label="Direct link to Environment variables" title="Direct link to Environment variables" translate="no">‚Äã</a></h2>
<table><thead><tr><th>Name</th><th>Used by</th><th>Required</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>IMAP_SERVER</code></td><td>script</td><td>Yes</td><td>none</td><td>IMAP server hostname or IP.</td></tr><tr><td><code>IMAP_PORT</code></td><td>script</td><td>No</td><td><code>993</code></td><td>IMAP SSL port.</td></tr><tr><td><code>EMAIL_USER</code></td><td>script</td><td>Yes</td><td>none</td><td>Username for IMAP login.</td></tr><tr><td><code>EMAIL_PASS</code></td><td>script</td><td>Yes</td><td>none</td><td>Password for IMAP login.</td></tr><tr><td><code>EMAIL_ADDRESS</code></td><td>script</td><td>No</td><td><code>EMAIL_USER</code></td><td>Mailbox label in logs/notifications.</td></tr><tr><td><code>CLEAN_DAYS</code></td><td>script</td><td>No</td><td><code>10</code></td><td>Delete messages older than this many days. Ignored if <code>--days</code> is passed.</td></tr><tr><td><code>SEND_TELEGRAM_NOTIFICATIONS</code></td><td>script</td><td>No</td><td><code>false</code></td><td>Enable Telegram notifications (<code>1</code>, <code>true</code>, <code>yes</code>, <code>on</code>).</td></tr><tr><td><code>TELEGRAM_BOT_TOKEN</code></td><td>script</td><td>Conditional</td><td>none</td><td>Required only if Telegram notifications are enabled.</td></tr><tr><td><code>CLEAN_EMAIL_TELEGRAM_CHAT_ID</code></td><td>script</td><td>Conditional</td><td>none</td><td>Preferred chat ID for this app. Has priority over <code>TELEGRAM_CHAT_ID</code>.</td></tr><tr><td><code>TELEGRAM_CHAT_ID</code></td><td>script</td><td>Conditional</td><td>none</td><td>Fallback chat ID if <code>CLEAN_EMAIL_TELEGRAM_CHAT_ID</code> is not set.</td></tr><tr><td><code>TELEGRAM_TIMEOUT</code></td><td>script</td><td>No</td><td><code>10</code></td><td>Telegram API timeout in seconds.</td></tr><tr><td><code>SCHEDULE_MIN</code></td><td>container entrypoint</td><td>No</td><td><code>0</code></td><td>Cron minute (<code>0-59</code>).</td></tr><tr><td><code>SCHEDULE_HOUR</code></td><td>container entrypoint</td><td>No</td><td><code>0</code></td><td>Cron hour (<code>0-23</code>).</td></tr><tr><td><code>SCHEDULE_DAY</code></td><td>container entrypoint</td><td>No</td><td><code>0</code></td><td>Cron weekday (<code>0-7</code>, where <code>0</code>/<code>7</code> is Sunday).</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="quick-start">Quick start<a href="#quick-start" class="hash-link" aria-label="Direct link to Quick start" title="Direct link to Quick start" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-ghcr-recommended">Docker (GHCR, recommended)<a href="#docker-ghcr-recommended" class="hash-link" aria-label="Direct link to Docker (GHCR, recommended)" title="Direct link to Docker (GHCR, recommended)" translate="no">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e IMAP_SERVER=&quot;imap.server.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e IMAP_PORT=993 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e EMAIL_USER=&quot;your_username&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e EMAIL_PASS=&quot;your_password&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e EMAIL_ADDRESS=&quot;mailbox@example.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e CLEAN_DAYS=10 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e SEND_TELEGRAM_NOTIFICATIONS=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e TELEGRAM_BOT_TOKEN=&quot;123456:ABCDEF&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e CLEAN_EMAIL_TELEGRAM_CHAT_ID=&quot;987654321&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e TELEGRAM_CHAT_ID=&quot;123456789&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e SCHEDULE_DAY=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e SCHEDULE_HOUR=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e SCHEDULE_MIN=30 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name email_cleaner ghcr.io/gioxx/clean-mail-automation:latest</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-docker-hub">Docker (Docker Hub)<a href="#docker-docker-hub" class="hash-link" aria-label="Direct link to Docker (Docker Hub)" title="Direct link to Docker (Docker Hub)" translate="no">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d --name email_cleaner gfsolone/clean-mail-automation:latest</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-build-locally-optional">Docker build locally (optional)<a href="#docker-build-locally-optional" class="hash-link" aria-label="Direct link to Docker build locally (optional)" title="Direct link to Docker build locally (optional)" translate="no">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker build -t email-cleaner .</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e IMAP_SERVER=&quot;imap.server.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e IMAP_PORT=993 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e EMAIL_USER=&quot;your_username&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e EMAIL_PASS=&quot;your_password&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e EMAIL_ADDRESS=&quot;mailbox@example.com&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e CLEAN_DAYS=10 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e SEND_TELEGRAM_NOTIFICATIONS=true \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e TELEGRAM_BOT_TOKEN=&quot;123456:ABCDEF&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e CLEAN_EMAIL_TELEGRAM_CHAT_ID=&quot;987654321&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e TELEGRAM_CHAT_ID=&quot;123456789&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e SCHEDULE_DAY=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e SCHEDULE_HOUR=1 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -e SCHEDULE_MIN=30 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --name email_cleaner email-cleaner</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="docker-compose">Docker Compose<a href="#docker-compose" class="hash-link" aria-label="Direct link to Docker Compose" title="Direct link to Docker Compose" translate="no">‚Äã</a></h3>
<p><code>compose.yaml</code></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">clean-mail-automation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io/gioxx/clean</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mail</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">automation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> email_cleaner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">restart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">IMAP_SERVER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;imap.server.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">IMAP_PORT</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;993&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">EMAIL_USER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your_username&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">EMAIL_PASS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your_password&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">EMAIL_ADDRESS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mailbox@example.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">CLEAN_DAYS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;10&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">SEND_TELEGRAM_NOTIFICATIONS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">TELEGRAM_BOT_TOKEN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;123456:ABCDEF&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">CLEAN_EMAIL_TELEGRAM_CHAT_ID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;987654321&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">SCHEDULE_DAY</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">SCHEDULE_HOUR</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">SCHEDULE_MIN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;30&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Alternative image:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># image: gfsolone/clean-mail-automation:latest</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="local-run-no-docker">Local run (no Docker)<a href="#local-run-no-docker" class="hash-link" aria-label="Direct link to Local run (no Docker)" title="Direct link to Local run (no Docker)" translate="no">‚Äã</a></h3>
<p>Prerequisites:</p>
<ul>
<li class="">Python 3.x</li>
<li class="">Network access to your IMAP server</li>
</ul>
<p>Export variables and run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export IMAP_SERVER=&quot;imap.server.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export IMAP_PORT=&quot;993&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export EMAIL_USER=&quot;your_username&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export EMAIL_PASS=&quot;your_password&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export EMAIL_ADDRESS=&quot;mailbox@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export CLEAN_DAYS=&quot;10&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 clean_email.py</span><br></span></code></pre></div></div>
<p>Optional retention override via CLI:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 clean_email.py --days 30</span><br></span></code></pre></div></div>
<p>For recurring runs without Docker, schedule <code>python3 clean_email.py</code> using your platform scheduler (<code>cron</code>, <code>systemd timer</code>, Windows Task Scheduler).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="repository-structure">Repository structure<a href="#repository-structure" class="hash-link" aria-label="Direct link to Repository structure" title="Direct link to Repository structure" translate="no">‚Äã</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">clean-mail-automation/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|- clean_email.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|- entrypoint.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|- Dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|- README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`- LICENSE</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="operational-notes">Operational notes<a href="#operational-notes" class="hash-link" aria-label="Direct link to Operational notes" title="Direct link to Operational notes" translate="no">‚Äã</a></h2>
<ul>
<li class=""><code>entrypoint.sh</code> writes cron configuration and executes a first immediate cleanup.</li>
<li class=""><code>SCHEDULE_DAY=1</code>, <code>SCHEDULE_HOUR=1</code>, <code>SCHEDULE_MIN=30</code> means every Monday at 01:30.</li>
<li class=""><code>--days</code> (CLI) overrides <code>CLEAN_DAYS</code> for that run.</li>
<li class="">Disabled by default; enable with <code>SEND_TELEGRAM_NOTIFICATIONS=true</code>.</li>
<li class="">Requires <code>TELEGRAM_BOT_TOKEN</code> and a chat ID when enabled.</li>
<li class="">Chat ID priority: <code>CLEAN_EMAIL_TELEGRAM_CHAT_ID</code> first, then <code>TELEGRAM_CHAT_ID</code>.</li>
<li class="">Container logs are available with <code>docker logs email_cleaner</code>.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="license">License<a href="#license" class="hash-link" aria-label="Direct link to License" title="Direct link to License" translate="no">‚Äã</a></h2>
<p>MIT License. See <code>LICENSE</code> in the repository.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/Nebula.KB-dev/Projects/tags/projects">Projects</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/Nebula.KB-dev/Projects/tags/python">Python</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/Nebula.KB-dev/Projects/tags/imap">IMAP</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/Nebula.KB-dev/Projects/tags/docker">Docker</a></li></ul></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Nebula.KB-dev/Projects/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Projects: introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Nebula.KB-dev/Projects/M365/intunewinapputilgui"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">IntuneWinAppUtil GUI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#demo-and-repository" class="table-of-contents__link toc-highlight">Demo and repository</a></li><li><a href="#key-features" class="table-of-contents__link toc-highlight">Key features</a></li><li><a href="#architecture-at-a-glance" class="table-of-contents__link toc-highlight">Architecture at a glance</a></li><li><a href="#environment-variables" class="table-of-contents__link toc-highlight">Environment variables</a></li><li><a href="#quick-start" class="table-of-contents__link toc-highlight">Quick start</a><ul><li><a href="#docker-ghcr-recommended" class="table-of-contents__link toc-highlight">Docker (GHCR, recommended)</a></li><li><a href="#docker-docker-hub" class="table-of-contents__link toc-highlight">Docker (Docker Hub)</a></li><li><a href="#docker-build-locally-optional" class="table-of-contents__link toc-highlight">Docker build locally (optional)</a></li><li><a href="#docker-compose" class="table-of-contents__link toc-highlight">Docker Compose</a></li><li><a href="#local-run-no-docker" class="table-of-contents__link toc-highlight">Local run (no Docker)</a></li></ul></li><li><a href="#repository-structure" class="table-of-contents__link toc-highlight">Repository structure</a></li><li><a href="#operational-notes" class="table-of-contents__link toc-highlight">Operational notes</a></li><li><a href="#license" class="table-of-contents__link toc-highlight">License</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Modules</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/Nebula/im-nebula">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/Nebula/Automations/intro">Nebula.Automations</a></li><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/Nebula/Core/intro">Nebula.Core</a></li><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/Nebula/Log/intro">Nebula.Log</a></li><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/Nebula/Tools/intro">Nebula.Tools</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Extras</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/Nebula/Scripts">Nebula.Scripts</a></li><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/Projects/intro">Projects</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Utilities</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/message-header-analyzer">E-mail Header Analyzer</a></li><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/psadt-log-viewer">PSADT Log Viewer</a></li><li class="footer__item"><a class="footer__link-item" href="/Nebula.KB-dev/quarantine-email-analyzer">Quarantine E-mail Analyzer</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Thanks to</div><ul class="footer__items clean-list"><li class="footer__item"><small>Microsoft, for the <a href="https://commons.wikimedia.org/wiki/File:PowerShell-Avatar_128.svg">PowerShell Avatar</a>, <a href="https://tabler.io/icons">Tabler Icons</a> and <a href="https://techicons.dev/">tech icons</a> for icons and SVG files.<br>A final big thank you to the guys at <strong>Catppuccin</strong> for the <a href="https://github.com/catppuccin/windows-terminal/blob/main/macchiato.json">Catpuccin Macchiato</a> theme, which inspired the basic colors used in this website.</small></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div style="color:var(--ifm-color-gray-300); padding-bottom: 9px; text-align: left;">All trademarks mentioned belong to their respective owners; third- party trademarks, product names, trade names, corporate names and companies mentioned may be trademarks of their respective owners or registered trademarks of other companies and have been used for explanatory purposes only and for the benefit of the owner, without any intention of infringing on existing copyright laws.</div>
        
        2026 ‚Äî Lovingly developed by the usually-on-vacation brain cell of <a href="https://gfsolone.com/#seguimi" target="_blank" rel="noopener noreferrer">Gioxx</a> ‚ù§Ô∏è ‚Äî Flawed by design, just like my code üöÆ</div></div></div></footer></div>
</body>
</html>